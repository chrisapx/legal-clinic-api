<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet id="1" author="system">
        <comment>Create permissions table</comment>
        <createTable tableName="permissions">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="code" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="TEXT"/>
            <column name="grouping" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="active" type="BIT" defaultValueBoolean="true">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="2" author="system">
        <comment>Create roles table</comment>
        <createTable tableName="roles">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="description" type="TEXT"/>
            <column name="is_default" type="BIT" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="active" type="BIT" defaultValueBoolean="true">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="3" author="system">
        <comment>Create role_permissions join table</comment>
        <createTable tableName="role_permissions">
            <column name="role_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="permission_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addPrimaryKey tableName="role_permissions" columnNames="role_id,permission_id"/>
        <addForeignKeyConstraint baseTableName="role_permissions" baseColumnNames="role_id"
                                 constraintName="fk_role_permissions_role"
                                 referencedTableName="roles" referencedColumnNames="id"
                                 onDelete="CASCADE"/>
        <addForeignKeyConstraint baseTableName="role_permissions" baseColumnNames="permission_id"
                                 constraintName="fk_role_permissions_permission"
                                 referencedTableName="permissions" referencedColumnNames="id"
                                 onDelete="CASCADE"/>
    </changeSet>

    <changeSet id="4" author="system">
        <comment>Create users table</comment>
        <createTable tableName="users">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="first_name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="last_name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="email" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="password" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="phone_number" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="role_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="active" type="BIT" defaultValueBoolean="true">
                <constraints nullable="false"/>
            </column>
            <column name="email_verified" type="BIT" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="verification_token" type="VARCHAR(255)"/>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint baseTableName="users" baseColumnNames="role_id"
                                 constraintName="fk_users_role"
                                 referencedTableName="roles" referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="5" author="system">
        <comment>Create legal_firms table</comment>
        <createTable tableName="legal_firms">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="registration_number" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="address" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="city" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="country" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="phone_number" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="email" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="TEXT"/>
            <column name="verified" type="BIT" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="6" author="system">
        <comment>Create lawyers table</comment>
        <createTable tableName="lawyers">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="license_number" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="specialization" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="years_of_experience" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="bio" type="TEXT"/>
            <column name="legal_firm_id" type="BIGINT"/>
            <column name="verified" type="BIT" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint baseTableName="lawyers" baseColumnNames="user_id"
                                 constraintName="fk_lawyers_user"
                                 referencedTableName="users" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="lawyers" baseColumnNames="legal_firm_id"
                                 constraintName="fk_lawyers_legal_firm"
                                 referencedTableName="legal_firms" referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="7" author="system">
        <comment>Create user_activities table</comment>
        <createTable tableName="user_activities">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="action" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="entity_type" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="entity_id" type="BIGINT"/>
            <column name="details" type="TEXT"/>
            <column name="ip_address" type="VARCHAR(255)"/>
            <column name="user_agent" type="VARCHAR(255)"/>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint baseTableName="user_activities" baseColumnNames="user_id"
                                 constraintName="fk_user_activities_user"
                                 referencedTableName="users" referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="8" author="system">
        <comment>Create password_reset_tokens table</comment>
        <createTable tableName="password_reset_tokens">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="token" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="expiry_date" type="TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="used" type="BIT" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="ip_address" type="VARCHAR(255)"/>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <createIndex tableName="password_reset_tokens" indexName="idx_token">
            <column name="token"/>
        </createIndex>
        <createIndex tableName="password_reset_tokens" indexName="idx_user_id">
            <column name="user_id"/>
        </createIndex>
        <addForeignKeyConstraint baseTableName="password_reset_tokens" baseColumnNames="user_id"
                                 constraintName="fk_password_reset_tokens_user"
                                 referencedTableName="users" referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="9" author="system">
        <comment>Create document_templates table</comment>
        <createTable tableName="document_templates">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="category" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="content" type="LONGTEXT">
                <constraints nullable="false"/>
            </column>
            <column name="format" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="active" type="BIT" defaultValueBoolean="true">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="VARCHAR(255)"/>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="10" author="system">
        <comment>Create generated_documents table</comment>
        <createTable tableName="generated_documents">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="template_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="file_name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="file_path" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="format" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="metadata" type="TEXT"/>
            <column name="status" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="file_size" type="BIGINT"/>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint baseTableName="generated_documents" baseColumnNames="template_id"
                                 constraintName="fk_generated_documents_template"
                                 referencedTableName="document_templates" referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="11" author="system">
        <comment>Create blog_posts table</comment>
        <createTable tableName="blog_posts">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="title" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="content" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="author_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="category" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="summary" type="TEXT"/>
            <column name="image_url" type="VARCHAR(255)"/>
            <column name="published" type="BIT" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="view_count" type="INT" defaultValueNumeric="0"/>
            <column name="tags" type="TEXT"/>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="12" author="system">
        <comment>Create blog_views table</comment>
        <createTable tableName="blog_views">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="blog_post_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="BIGINT"/>
            <column name="ip_address" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="user_agent" type="VARCHAR(255)"/>
            <column name="referrer" type="VARCHAR(255)"/>
            <column name="time_spent" type="INT"/>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <createIndex tableName="blog_views" indexName="idx_blog_post_id">
            <column name="blog_post_id"/>
        </createIndex>
        <createIndex tableName="blog_views" indexName="idx_user_id_blog_views">
            <column name="user_id"/>
        </createIndex>
        <createIndex tableName="blog_views" indexName="idx_ip_address">
            <column name="ip_address"/>
        </createIndex>
        <addForeignKeyConstraint baseTableName="blog_views" baseColumnNames="blog_post_id"
                                 constraintName="fk_blog_views_blog_post"
                                 referencedTableName="blog_posts" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="blog_views" baseColumnNames="user_id"
                                 constraintName="fk_blog_views_user"
                                 referencedTableName="users" referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="13" author="system">
        <comment>Create bookmarks table</comment>
        <createTable tableName="bookmarks">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="blog_post_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="notes" type="VARCHAR(255)"/>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addUniqueConstraint tableName="bookmarks" columnNames="user_id,blog_post_id"
                             constraintName="uk_user_blog_post"/>
        <createIndex tableName="bookmarks" indexName="idx_user_bookmarks">
            <column name="user_id"/>
        </createIndex>
        <createIndex tableName="bookmarks" indexName="idx_post_bookmarks">
            <column name="blog_post_id"/>
        </createIndex>
        <addForeignKeyConstraint baseTableName="bookmarks" baseColumnNames="user_id"
                                 constraintName="fk_bookmarks_user"
                                 referencedTableName="users" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="bookmarks" baseColumnNames="blog_post_id"
                                 constraintName="fk_bookmarks_blog_post"
                                 referencedTableName="blog_posts" referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="14" author="system">
        <comment>Create questions table</comment>
        <createTable tableName="questions">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="title" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="content" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="author_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="category" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="tags" type="TEXT"/>
            <column name="view_count" type="INT" defaultValueNumeric="0"/>
            <column name="vote_count" type="INT" defaultValueNumeric="0"/>
            <column name="resolved" type="BIT" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="accepted_answer_id" type="BIGINT"/>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="15" author="system">
        <comment>Create answers table</comment>
        <createTable tableName="answers">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="question_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="content" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="author_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="vote_count" type="INT" defaultValueNumeric="0"/>
            <column name="accepted" type="BIT" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint baseTableName="answers" baseColumnNames="question_id"
                                 constraintName="fk_answers_question"
                                 referencedTableName="questions" referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="16" author="system">
        <comment>Create news_updates table</comment>
        <createTable tableName="news_updates">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="title" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="content" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="author_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="category" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="summary" type="TEXT"/>
            <column name="image_url" type="VARCHAR(255)"/>
            <column name="source_url" type="VARCHAR(255)"/>
            <column name="published" type="BIT" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="view_count" type="INT" defaultValueNumeric="0"/>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="17" author="system">
        <comment>Create conversations table</comment>
        <createTable tableName="conversations">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="archived" type="BIT" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <createIndex tableName="conversations" indexName="idx_user_id_conversations">
            <column name="user_id"/>
        </createIndex>
        <createIndex tableName="conversations" indexName="idx_created_at">
            <column name="created_at"/>
        </createIndex>
    </changeSet>

    <changeSet id="18" author="system">
        <comment>Create chat_messages table</comment>
        <createTable tableName="chat_messages">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="conversation_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="user_message" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="ai_response" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="context" type="TEXT"/>
            <column name="status" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="error_message" type="TEXT"/>
            <column name="model" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" type="TIMESTAMP" defaultValueComputed="CURRENT_TIMESTAMP">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <createIndex tableName="chat_messages" indexName="idx_conversation_id">
            <column name="conversation_id"/>
        </createIndex>
        <createIndex tableName="chat_messages" indexName="idx_user_id_chat_messages">
            <column name="user_id"/>
        </createIndex>
        <createIndex tableName="chat_messages" indexName="idx_created_at_chat_messages">
            <column name="created_at"/>
        </createIndex>
        <addForeignKeyConstraint baseTableName="chat_messages" baseColumnNames="conversation_id"
                                 constraintName="fk_chat_messages_conversation"
                                 referencedTableName="conversations" referencedColumnNames="id"/>
    </changeSet>

</databaseChangeLog>
